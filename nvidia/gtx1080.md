# Installing NVIDIA GTX 1080 Drivers on Arch Linux (CLI Only, No GUI)

This guide will help you install the correct drivers for an NVIDIA GTX 1080 on Arch Linux using only the command line (no Desktop Environment or GUI).

---

## 1. Update Your System

```sh
sudo pacman -Syu
```
**Reboot if the kernel was updated:**
```sh
sudo reboot
```

---

## 2. Identify Your GPU (Optional)

Verify your GPU is a GTX 1080:
```sh
lspci | grep -i nvidia
```

---

## 3. Install the Correct NVIDIA Drivers

**For GTX 1080, use the official proprietary NVIDIA driver:**

- The package is: `nvidia`
- For CLI/headless: `nvidia` is sufficient (add `nvidia-headless` only if you never plan to use X11)
- Install dependencies:

```sh
sudo pacman -S nvidia nvidia-utils
```

*If you use a custom kernel (not the default `linux`), also install the matching headers and consider `nvidia-dkms`:*

```sh
sudo pacman -S linux-headers nvidia-dkms
```
*Replace `linux-headers` with your kernel's headers if not using the default kernel (e.g., `linux-lts-headers`).*

---

## 4. Load the NVIDIA Kernel Module

```sh
sudo modprobe nvidia
```

Check it's loaded:
```sh
lsmod | grep nvidia
```

---

## 5. Regenerate initramfs (Recommended)

```sh
sudo mkinitcpio -P
```

---

## 6. Blacklist Nouveau (if needed, to avoid conflicts)

```sh
echo -e "blacklist nouveau\noptions nouveau modeset=0" | sudo tee /etc/modprobe.d/blacklist-nouveau.conf
sudo mkinitcpio -P
```

**Reboot:**
```sh
sudo reboot
```

---

## 7. Test the NVIDIA Driver

```sh
nvidia-smi
```
You should see your GTX 1080 listed.

---

## 8. (Optional) CUDA Support

If you need CUDA for compute:
```sh
sudo pacman -S cuda
```

---

## 9. (Optional) X11 Configuration

Only if you plan to use X11 later:
```sh
sudo nvidia-xconfig
```

---

## 10. Fan Speed and Power Profile Control (GPU & CPU)

You can control the fan speed and power profiles of NVIDIA GPUs and system CPUs using command-line tools on Arch Linux.

### NVIDIA GPU Fan Speed & Power Profiles

**Required Tool:** `nvidia-settings` (requires Xorg even if not using a full desktop environment)

- Install (if not already):
    ```sh
    sudo pacman -S nvidia-settings
    ```

- Start a minimal X server (required for nvidia-settings to work with fan control):
    ```sh
    startx
    ```

- Enable manual fan control:
    ```sh
    nvidia-settings -a "[gpu:0]/GPUFanControlState=1"
    nvidia-settings -a "[fan:0]/GPUTargetFanSpeed=80" # Set fan to 80%
    ```

- Set power limit:
    ```sh
    nvidia-smi -pl <watts>
    # Example: Set to 200W
    nvidia-smi -pl 200
    ```

**Note:** Fan control typically requires Xorg. For headless setups, consider [nvfancontrol](https://aur.archlinux.org/packages/nvfancontrol) or scripts using `nvidia-smi` and Xorg in virtual mode. For advanced setups, see [Arch Wiki – NVIDIA Coolbits](https://wiki.archlinux.org/title/NVIDIA#Enabling_overclocking_(and_fan_control)_with_CoolBits).

---

### CPU Power and Fan Control

#### Power Profiles

**Tool:** `tlp`  
- Install:
    ```sh
    sudo pacman -S tlp
    sudo systemctl enable tlp
    sudo systemctl start tlp
    ```
- Basic usage:
    ```sh
    sudo tlp start       # Apply TLP settings
    sudo tlp-stat -s     # Show current power status
    ```

**Tool:** `cpupower`  
- Install:
    ```sh
    sudo pacman -S linux-tools
    ```
- Set CPU governor:
    ```sh
    sudo cpupower frequency-set -g performance
    sudo cpupower frequency-set -g powersave
    ```

#### Fan Control

**Tool:** `lm_sensors` and `fancontrol`  
- Install:
    ```sh
    sudo pacman -S lm_sensors fancontrol
    sudo sensors-detect
    ```
- Start fancontrol:
    ```sh
    sudo pwmconfig   # Configure fancontrol
    sudo systemctl enable fancontrol
    sudo systemctl start fancontrol
    ```

**Note:** Not all motherboards support software fan control. Check `sensors` output for available controls.

---

## 11. Should You Change Fan/Power Profiles for Optimal Performance?

For most users, the **default settings** after installing the official NVIDIA driver and tools are well-optimized for a balance of performance, noise, and hardware longevity.

- NVIDIA's drivers automatically manage fan speeds and power profiles to keep your GPU and system running safely and efficiently.
- CPU governors default to "ondemand" or "schedutil," balancing high performance with power savings.

**Best Practice:**
- **Leave system defaults as-is** unless you have a specific need for higher performance (such as gaming, rendering, or benchmarking), or lower noise/heat.
- Manual tweaks (higher fan speeds, "performance" CPU governor, increased GPU power limit) can provide extra performance, but may result in higher noise, power draw, and component wear.  
- If stability and hardware health are your priorities, the default automatic profiles are recommended.

**When to Change Settings:**  
- If you are overclocking, running compute-heavy workloads, or need to benchmark, consider adjusting fan and power profiles for lower temperatures and higher performance.
- Otherwise, the default configuration is optimal for most use cases.

---

## Power cable guide
<img width="659" height="328" alt="image" src="https://github.com/user-attachments/assets/7e2b74d8-8b4a-4d6d-869a-6b06418521a0" />


## References

- [Arch Wiki – NVIDIA](https://wiki.archlinux.org/title/NVIDIA)
- [Arch Wiki – NVIDIA/Troubleshooting](https://wiki.archlinux.org/title/NVIDIA/Troubleshooting)
- [Arch Wiki – NVIDIA Coolbits](https://wiki.archlinux.org/title/NVIDIA#Enabling_overclocking_(and_fan_control)_with_CoolBits)
- [Arch Wiki – TLP](https://wiki.archlinux.org/title/TLP)
- [Arch Wiki – CPU frequency scaling](https://wiki.archlinux.org/title/CPU_frequency_scaling)
- [Arch Wiki – Fan speed control](https://wiki.archlinux.org/title/Fan_speed_control)

---

## Summary of Packages for GTX 1080

- **nvidia** — Official proprietary driver for current (Kepler, Maxwell, Pascal, Turing, Ampere, Ada) NVIDIA GPUs including GTX 1080.
- **nvidia-utils** — Required utilities and libraries.
- **linux-headers** — For DKMS or custom kernels.
- **nvidia-dkms** — For non-standard or custom kernels.
- **nvidia-headless** — For headless setups (optional).
- **cuda** — For CUDA development (optional).
- **nvidia-settings** — For GPU fan/power control.
- **tlp** — For CPU power profile management.
- **cpupower** — For CPU frequency governor.
- **lm_sensors** & **fancontrol** — For system fan monitoring/control.

**You do NOT need legacy drivers (e.g., `nvidia-470xx` or `nvidia-390xx`) for GTX 1080. Use the current `nvidia` package.**
